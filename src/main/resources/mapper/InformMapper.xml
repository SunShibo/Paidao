<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<!-- 【举报】 -->
<mapper namespace="com.solland.paidao.dao.InformDAO">

	<!-- 查询【举报】的记录数 -->
	<sql id="selectCount">
		SELECT count(1) FROM pd_inform_info
	</sql>

	<!-- 添加【举报】 -->
    <insert id="insert" parameterType="com.solland.paidao.entity.InformDO" useGeneratedKeys="true" keyProperty="id">
		INSERT INTO 
		pd_inform_info (
     			create_time
     			<if test="0 &lt; activityId">, activity_id </if>
     			<if test="0 &lt; activityAuthorId">, activity_author_id </if>
     			<if test="0 &lt; informerId">, informer_id </if>
     			<if test="null != content and '' != content">, content</if>
     		) 
           VALUES (
          		CURRENT_TIMESTAMP
          		<if test="0 &lt; activityId">, #{activityId} </if>
          		<if test="0 &lt; activityAuthorId">, #{activityAuthorId} </if>
          		<if test="0 &lt; informerId">, #{informerId} </if>
     			<if test="null != content and '' != content">, #{content}</if>
           )
    </insert>
    
    <!-- 根据【活动ID】查询【举报】的数量 -->
    <select id="selectInformDOCountByActivityId" parameterType="int" resultType="int">
    	<include refid="selectCount" />
    	where activity_id = #{activityId}
    </select>
    
</mapper>